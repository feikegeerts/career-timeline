import{t as O,f as q,c as z}from"../chunks/CwldcDWk.js";import{i as G}from"../chunks/DcTzFIy4.js";import{c as K,w as C,g as ue,o as de,h as ve,N as he,D as o,Y as H,P as pe,Q as X,s as B,d as P,f as ge,R as se,p as ae,T as _e,m as le,ad as me,a6 as V,am as Z,an as W,x as j,ao as we,ap as Ee,aq as Ie,l as be,ar as Te,as as ye,at as Se,au as Ae,a as xe,av as Ne,aw as Ce,ax as Le,ay as Me,V as Re,ab as ke,t as J,ai as ie,K as R,L,M as U,a0 as A,J as oe,y as Q}from"../chunks/BatoUL1g.js";import{s as Y}from"../chunks/BIlWtTmT.js";import{p as N,i as F}from"../chunks/DqDBf7zy.js";import{b as ce}from"../chunks/C9O30MNJ.js";function Ve(n,e){return e}function De(n,e,t,r){for(var i=[],a=e.length,l=0;l<a;l++)Ie(e[l].e,i,!0);var p=a>0&&i.length===0&&t!==null;if(p){var g=t.parentNode;be(g),g.append(t),r.clear(),k(n,e[0].prev,e[a-1].next)}Te(i,()=>{for(var u=0;u<a;u++){var s=e[u];p||(r.delete(s.k),k(n,s.prev,s.next)),ye(s.e,!p)}})}function He(n,e,t,r,i,a=null){var l=n,p={flags:e,items:new Map,first:null};{var g=n;l=C?K(ue(g)):g.appendChild(de())}C&&ve();var u=null,s=!1,_=H(()=>{var c=t();return me(c)?c:c==null?[]:le(c)});he(()=>{var c=o(_),d=c.length;if(s&&d===0)return;s=d===0;let v=!1;if(C){var m=l.data===pe;m!==(d===0)&&(l=X(),K(l),B(!1),v=!0)}if(C){for(var b=null,h,w=0;w<d;w++){if(P.nodeType===8&&P.data===ge){l=P,v=!0,B(!1);break}var x=c[w],T=r(x,w);h=fe(P,p,b,null,x,T,w,i,e,t),p.items.set(T,h),b=h}d>0&&K(X())}C||ze(c,p,l,i,e,r,t),a!==null&&(d===0?u?se(u):u=ae(()=>a(l)):u!==null&&_e(u,()=>{u=null})),v&&B(!0),o(_)}),C&&(l=P)}function ze(n,e,t,r,i,a,l){var p=n.length,g=e.items,u=e.first,s=u,_,c=null,d=[],v=[],m,b,h,w;for(w=0;w<p;w+=1){if(m=n[w],b=a(m,w),h=g.get(b),h===void 0){var x=s?s.e.nodes_start:t;c=fe(x,e,c,c===null?e.first:c.next,m,b,w,r,i,l),g.set(b,c),d=[],v=[],s=c.next;continue}if(Oe(h,m,w),(h.e.f&W)!==0&&se(h.e),h!==s){if(_!==void 0&&_.has(h)){if(d.length<v.length){var T=v[0],y;c=T.prev;var f=d[0],E=d[d.length-1];for(y=0;y<d.length;y+=1)$(d[y],T,t);for(y=0;y<v.length;y+=1)_.delete(v[y]);k(e,f.prev,E.next),k(e,c,f),k(e,E,T),s=T,c=E,w-=1,d=[],v=[]}else _.delete(h),$(h,s,t),k(e,h.prev,h.next),k(e,h,c===null?e.first:c.next),k(e,c,h),c=h;continue}for(d=[],v=[];s!==null&&s.k!==b;)(s.e.f&W)===0&&(_??(_=new Set)).add(s),v.push(s),s=s.next;if(s===null)continue;h=s}d.push(h),c=h,s=h.next}if(s!==null||_!==void 0){for(var I=_===void 0?[]:le(_);s!==null;)(s.e.f&W)===0&&I.push(s),s=s.next;var M=I.length;if(M>0){var S=p===0?t:null;De(e,I,S,g)}}j.first=e.first&&e.first.e,j.last=c&&c.e}function Oe(n,e,t,r){Ee(n.v,e),n.i=t}function fe(n,e,t,r,i,a,l,p,g,u){var s=(g&Se)!==0,_=(g&Ae)===0,c=s?_?V(i):Z(i):i,d=(g&we)===0?l:Z(l),v={i:d,v:c,k:a,a:null,e:null,prev:t,next:r};try{return v.e=ae(()=>p(n,c,d,u),C),v.e.prev=t&&t.e,v.e.next=r&&r.e,t===null?e.first=v:(t.next=v,t.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function $(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,i=e?e.e.nodes_start:t,a=n.e.nodes_start;a!==r;){var l=xe(a);i.before(a),a=l}}function k(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const ee=[...` 	
\r\f \v\uFEFF`];function Pe(n,e,t){var r=n==null?"":""+n;if(t){for(var i in t)if(t[i])r=r?r+" "+i:i;else if(r.length)for(var a=i.length,l=0;(l=r.indexOf(i,l))>=0;){var p=l+a;(l===0||ee.includes(r[l-1]))&&(p===r.length||ee.includes(r[p]))?r=(l===0?"":r.substring(0,l))+r.substring(p+1):l=p}}return r===""?null:r}function te(n,e,t,r,i,a){var l=n.__className;if(C||l!==t||l===void 0){var p=Pe(t,r,a);(!C||p!==n.getAttribute("class"))&&(p==null?n.removeAttribute("class"):n.className=p),n.__className=t}else if(a&&i!==a)for(var g in a){var u=!!a[g];(i==null||u!==!!i[g])&&n.classList.toggle(g,u)}return a}const Ue=Symbol("is custom element"),Ye=Symbol("is html");function ne(n,e,t,r){var i=qe(n);C&&(i[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="loading"&&(n[Ne]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Ke(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function qe(n){return n.__attributes??(n.__attributes={[Ue]:n.nodeName.includes("-"),[Ye]:n.namespaceURI===Ce})}var re=new Map;function Ke(n){var e=re.get(n.nodeName);if(e)return e;re.set(n.nodeName,e=[]);for(var t,r=n,i=Element.prototype;i!==r;){t=Me(r);for(var a in t)t[a].set&&e.push(a);r=Le(r)}return e}function Be(n,e,t){var r=Re(n,e);r&&r.set&&(n[e]=t,ke(()=>{n[e]=null}))}function We(n){return function(...e){var t=e[0];return t.stopPropagation(),n==null?void 0:n.apply(this,e)}}var Fe=O('<button class="close-button svelte-8bdz63"><span class="close-icon svelte-8bdz63">×</span></button>'),Ge=O('<div role="button"><div class="timeline-content svelte-8bdz63"><div class="timeline-date svelte-8bdz63"> </div> <h2 class="svelte-8bdz63"> </h2> <h3 class="svelte-8bdz63"> </h3> <p> </p> <!></div></div>');function Je(n,e){J(e,!1);let t=N(e,"event",8),r=N(e,"isSelected",8),i=N(e,"position",8),a=N(e,"selectedEventId",8),l=N(e,"onSelect",8),p=N(e,"onClose",8),g=N(e,"elementRef",8),u=V();ie(()=>(o(u)&&g().set(t().id,o(u)),()=>{g().delete(t().id)})),G();var s=Ge();let _;var c=R(s),d=R(c),v=R(d,!0);L(d);var m=U(d,2),b=R(m,!0);L(m);var h=U(m,2),w=R(h,!0);L(h);var x=U(h,2);let T;var y=R(x,!0);L(x);var f=U(x,2);{var E=I=>{var M=Fe();q("click",M,We(function(...S){var D;(D=p())==null||D.apply(this,S)})),z(I,M)};F(f,I=>{r()&&I(E)})}L(c),L(s),ce(s,I=>A(u,I),()=>o(u)),oe((I,M,S)=>{_=te(s,1,"timeline-item svelte-8bdz63",null,_,I),ne(s,"tabindex",M),ne(s,"aria-label",`View details for ${t().title??""} at ${t().company??""}`),Y(v,t().period),Y(b,t().title),Y(w,t().company),T=te(x,1,"event-description svelte-8bdz63",null,T,S),Y(y,t().description)},[()=>({selected:r()}),()=>a()===null||Math.abs(i())<=1?0:-1,()=>({selected:r()})],H),q("click",s,()=>l()(t().id)),q("keydown",s,I=>I.key==="Enter"&&l()(t().id)),z(n,s),Q()}var Qe=O('<div class="timeline-container svelte-1epnw6j"></div>');function Xe(n,e){J(e,!1);let t=N(e,"careerEvents",8),r=N(e,"selectedEventId",8,null),i=N(e,"onSelect",8),a=N(e,"onClose",8),l=V(new Map);function p(){if(r()===null)return;const u=o(l).get(r());u&&u.scrollIntoView({behavior:"smooth",block:"center"})}G();var g=Qe();return He(g,5,t,Ve,(u,s)=>{const _=H(()=>r()!==null&&o(s).id===r()),c=H(()=>r()!==null?t().findIndex(m=>m.id===r()):-1),d=H(()=>t().findIndex(m=>m.id===o(s).id)),v=H(()=>r()!==null?o(d)-o(c):0);Je(u,{get event(){return o(s)},get isSelected(){return o(_)},get position(){return o(v)},get selectedEventId(){return r()},get onSelect(){return i()},get onClose(){return a()},get elementRef(){return o(l)},set elementRef(m){A(l,m)},$$legacy:!0})}),L(g),z(n,g),Be(e,"scrollSelectedIntoView",p),Q({scrollSelectedIntoView:p})}var Ze=O('<p class="error svelte-1p5dgnh"> </p>'),je=O("<p>Loading...</p>"),$e=O('<main class="svelte-1p5dgnh"><header class="svelte-1p5dgnh"><h1 class="svelte-1p5dgnh">My Career Timeline</h1> <p>A chronological journey through my professional experience</p></header> <!></main>');function lt(n,e){J(e,!1);let t=V(null),r=!1,i=V(),a=V([]),l=V(null);const p="https://qk35lum0xh.execute-api.eu-west-1.amazonaws.com/prod/career-events",g=!1;async function u(){try{const f=g?"/api-proxy":p;console.log(`Fetching from: ${f}`);const E=await fetch(f,{headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",credentials:"omit",cache:"no-cache"});if(!E.ok)throw new Error(`API request failed: ${E.status} ${E.statusText}`);const I=await E.json();A(a,I.careerEvents),console.log("Successfully loaded career events")}catch(f){console.error("API Error:",f),f instanceof TypeError&&f.message.includes("NetworkError")?A(l,"CORS error: Unable to access the API. This might be a cross-origin request issue."):A(l,f instanceof Error?f.message:"An unknown error occurred fetching career events")}}ie(()=>(u(),window.addEventListener("keydown",v),window.addEventListener("wheel",h,{passive:!1}),()=>{window.removeEventListener("keydown",v),window.removeEventListener("wheel",h)}));function s(f){A(t,f),setTimeout(()=>{o(i).scrollSelectedIntoView()},10)}function _(){A(t,null)}function c(){if(o(t)===null){o(a).length>0&&(A(t,o(a)[0].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10));return}const f=o(a).findIndex(E=>E.id===o(t));f<o(a).length-1&&(A(t,o(a)[f+1].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10))}function d(){if(o(t)===null){o(a).length>0&&(A(t,o(a)[o(a).length-1].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10));return}const f=o(a).findIndex(E=>E.id===o(t));f>0&&(A(t,o(a)[f-1].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10))}function v(f){switch(f.key){case"Escape":_();break;case"ArrowDown":case"ArrowRight":c();break;case"ArrowUp":case"ArrowLeft":d();break}}let m=0;const b=50;function h(f){f.preventDefault(),m+=Math.abs(f.deltaY),!(m<b)&&(m=0,!r&&(r=!0,setTimeout(()=>{r=!1},500),f.deltaY>0?c():d()))}G();var w=$e(),x=U(R(w),2);{var T=f=>{var E=Ze(),I=R(E);L(E),oe(()=>Y(I,`Error: ${o(l)??""}`)),z(f,E)},y=(f,E)=>{{var I=S=>{var D=je();z(S,D)},M=S=>{ce(Xe(S,{get careerEvents(){return o(a)},get selectedEventId(){return o(t)},onSelect:s,onClose:_,$$legacy:!0}),D=>A(i,D),()=>o(i))};F(f,S=>{o(a).length===0?S(I):S(M,!1)},E)}};F(x,f=>{o(l)?f(T):f(y,!1)})}L(w),z(n,w),Q()}export{lt as component};
