import{t as O,f as U,c as H}from"../chunks/CwldcDWk.js";import{i as W}from"../chunks/DcTzFIy4.js";import{c as F,w as C,g as ue,o as de,h as ve,N as he,D as o,Y as D,P as pe,Q,s as J,d as P,f as _e,R as ae,p as le,T as ge,m as ie,ad as me,a6 as k,am as Z,an as q,x as j,ao as we,ap as Ee,aq as Ie,l as be,ar as Te,as as ye,at as Se,au as xe,a as Ae,av as Ne,aw as Ce,ax as Le,ay as Me,V as Re,ab as Ve,t as X,ai as se,K as R,L,M as Y,a0 as A,J as oe,y as G}from"../chunks/BatoUL1g.js";import{s as K}from"../chunks/BIlWtTmT.js";import{p as N,i as B}from"../chunks/DqDBf7zy.js";import{b as ce}from"../chunks/C9O30MNJ.js";function ke(n,e){return e}function ze(n,e,t,r){for(var i=[],l=e.length,s=0;s<l;s++)Ie(e[s].e,i,!0);var p=l>0&&i.length===0&&t!==null;if(p){var _=t.parentNode;be(_),_.append(t),r.clear(),V(n,e[0].prev,e[l-1].next)}Te(i,()=>{for(var u=0;u<l;u++){var a=e[u];p||(r.delete(a.k),V(n,a.prev,a.next)),ye(a.e,!p)}})}function De(n,e,t,r,i,l=null){var s=n,p={flags:e,items:new Map,first:null};{var _=n;s=C?F(ue(_)):_.appendChild(de())}C&&ve();var u=null,a=!1,g=D(()=>{var c=t();return me(c)?c:c==null?[]:ie(c)});he(()=>{var c=o(g),d=c.length;if(a&&d===0)return;a=d===0;let v=!1;if(C){var m=s.data===pe;m!==(d===0)&&(s=Q(),F(s),J(!1),v=!0)}if(C){for(var b=null,h,w=0;w<d;w++){if(P.nodeType===8&&P.data===_e){s=P,v=!0,J(!1);break}var x=c[w],T=r(x,w);h=fe(P,p,b,null,x,T,w,i,e,t),p.items.set(T,h),b=h}d>0&&F(Q())}C||He(c,p,s,i,e,r,t),l!==null&&(d===0?u?ae(u):u=le(()=>l(s)):u!==null&&ge(u,()=>{u=null})),v&&J(!0),o(g)}),C&&(s=P)}function He(n,e,t,r,i,l,s){var p=n.length,_=e.items,u=e.first,a=u,g,c=null,d=[],v=[],m,b,h,w;for(w=0;w<p;w+=1){if(m=n[w],b=l(m,w),h=_.get(b),h===void 0){var x=a?a.e.nodes_start:t;c=fe(x,e,c,c===null?e.first:c.next,m,b,w,r,i,s),_.set(b,c),d=[],v=[],a=c.next;continue}if(Oe(h,m,w),(h.e.f&q)!==0&&ae(h.e),h!==a){if(g!==void 0&&g.has(h)){if(d.length<v.length){var T=v[0],y;c=T.prev;var f=d[0],I=d[d.length-1];for(y=0;y<d.length;y+=1)$(d[y],T,t);for(y=0;y<v.length;y+=1)g.delete(v[y]);V(e,f.prev,I.next),V(e,c,f),V(e,I,T),a=T,c=I,w-=1,d=[],v=[]}else g.delete(h),$(h,a,t),V(e,h.prev,h.next),V(e,h,c===null?e.first:c.next),V(e,c,h),c=h;continue}for(d=[],v=[];a!==null&&a.k!==b;)(a.e.f&q)===0&&(g??(g=new Set)).add(a),v.push(a),a=a.next;if(a===null)continue;h=a}d.push(h),c=h,a=h.next}if(a!==null||g!==void 0){for(var E=g===void 0?[]:ie(g);a!==null;)(a.e.f&q)===0&&E.push(a),a=a.next;var M=E.length;if(M>0){var S=p===0?t:null;ze(e,E,S,_)}}j.first=e.first&&e.first.e,j.last=c&&c.e}function Oe(n,e,t,r){Ee(n.v,e),n.i=t}function fe(n,e,t,r,i,l,s,p,_,u){var a=(_&Se)!==0,g=(_&xe)===0,c=a?g?k(i):Z(i):i,d=(_&we)===0?s:Z(s),v={i:d,v:c,k:l,a:null,e:null,prev:t,next:r};try{return v.e=le(()=>p(n,c,d,u),C),v.e.prev=t&&t.e,v.e.next=r&&r.e,t===null?e.first=v:(t.next=v,t.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function $(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,i=e?e.e.nodes_start:t,l=n.e.nodes_start;l!==r;){var s=Ae(l);i.before(l),l=s}}function V(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const ee=[...` 	
\r\f \v\uFEFF`];function Pe(n,e,t){var r=n==null?"":""+n;if(t){for(var i in t)if(t[i])r=r?r+" "+i:i;else if(r.length)for(var l=i.length,s=0;(s=r.indexOf(i,s))>=0;){var p=s+l;(s===0||ee.includes(r[s-1]))&&(p===r.length||ee.includes(r[p]))?r=(s===0?"":r.substring(0,s))+r.substring(p+1):s=p}}return r===""?null:r}function te(n,e,t,r,i,l){var s=n.__className;if(C||s!==t||s===void 0){var p=Pe(t,r,l);(!C||p!==n.getAttribute("class"))&&(p==null?n.removeAttribute("class"):n.className=p),n.__className=t}else if(l&&i!==l)for(var _ in l){var u=!!l[_];(i==null||u!==!!i[_])&&n.classList.toggle(_,u)}return l}const Ye=Symbol("is custom element"),Ke=Symbol("is html");function ne(n,e,t,r){var i=Ue(n);C&&(i[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="loading"&&(n[Ne]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Fe(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Ue(n){return n.__attributes??(n.__attributes={[Ye]:n.nodeName.includes("-"),[Ke]:n.namespaceURI===Ce})}var re=new Map;function Fe(n){var e=re.get(n.nodeName);if(e)return e;re.set(n.nodeName,e=[]);for(var t,r=n,i=Element.prototype;i!==r;){t=Me(r);for(var l in t)t[l].set&&e.push(l);r=Le(r)}return e}function Je(n,e,t){var r=Re(n,e);r&&r.set&&(n[e]=t,Ve(()=>{n[e]=null}))}function qe(n){return function(...e){var t=e[0];return t.stopPropagation(),n==null?void 0:n.apply(this,e)}}var Be=O('<button class="close-button svelte-8bdz63"><span class="close-icon svelte-8bdz63">×</span></button>'),We=O('<div role="button"><div class="timeline-content svelte-8bdz63"><div class="timeline-date svelte-8bdz63"> </div> <h2 class="svelte-8bdz63"> </h2> <h3 class="svelte-8bdz63"> </h3> <p> </p> <!></div></div>');function Xe(n,e){X(e,!1);let t=N(e,"event",8),r=N(e,"isSelected",8),i=N(e,"position",8),l=N(e,"selectedEventId",8),s=N(e,"onSelect",8),p=N(e,"onClose",8),_=N(e,"elementRef",8),u=k();se(()=>(o(u)&&_().set(t().id,o(u)),()=>{_().delete(t().id)})),W();var a=We();let g;var c=R(a),d=R(c),v=R(d,!0);L(d);var m=Y(d,2),b=R(m,!0);L(m);var h=Y(m,2),w=R(h,!0);L(h);var x=Y(h,2);let T;var y=R(x,!0);L(x);var f=Y(x,2);{var I=E=>{var M=Be();U("click",M,qe(function(...S){var z;(z=p())==null||z.apply(this,S)})),H(E,M)};B(f,E=>{r()&&E(I)})}L(c),L(a),ce(a,E=>A(u,E),()=>o(u)),oe((E,M,S)=>{g=te(a,1,"timeline-item svelte-8bdz63",null,g,E),ne(a,"tabindex",M),ne(a,"aria-label",`View details for ${t().title??""} at ${t().company??""}`),K(v,t().period),K(b,t().title),K(w,t().company),T=te(x,1,"event-description svelte-8bdz63",null,T,S),K(y,t().description)},[()=>({selected:r()}),()=>l()===null||Math.abs(i())<=1?0:-1,()=>({selected:r()})],D),U("click",a,()=>s()(t().id)),U("keydown",a,E=>E.key==="Enter"&&s()(t().id)),H(n,a),G()}var Ge=O('<div class="timeline-container svelte-1epnw6j"></div>');function Qe(n,e){X(e,!1);let t=N(e,"careerEvents",8),r=N(e,"selectedEventId",8,null),i=N(e,"onSelect",8),l=N(e,"onClose",8),s=k(new Map);function p(){if(r()===null)return;const u=o(s).get(r());u&&u.scrollIntoView({behavior:"smooth",block:"center"})}W();var _=Ge();return De(_,5,t,ke,(u,a)=>{const g=D(()=>r()!==null&&o(a).id===r()),c=D(()=>r()!==null?t().findIndex(m=>m.id===r()):-1),d=D(()=>t().findIndex(m=>m.id===o(a).id)),v=D(()=>r()!==null?o(d)-o(c):0);Xe(u,{get event(){return o(a)},get isSelected(){return o(g)},get position(){return o(v)},get selectedEventId(){return r()},get onSelect(){return i()},get onClose(){return l()},get elementRef(){return o(s)},set elementRef(m){A(s,m)},$$legacy:!0})}),L(_),H(n,_),Je(e,"scrollSelectedIntoView",p),G({scrollSelectedIntoView:p})}var Ze=O('<p class="error svelte-odrozm"> </p>'),je=O("<p>Loading...</p>"),$e=O('<main class="svelte-odrozm"><header class="svelte-odrozm"><h1 class="svelte-odrozm">My Career Timeline</h1> <p>A chronological journey through my professional experience</p></header> <!></main>');function it(n,e){X(e,!1);let t=k(null),r=!1,i=k(),l=k([]),s=k(null);const p="https://u7itj46pi1.execute-api.eu-west-1.amazonaws.com/prod/career-events",_="OCYtpnA5aa1XJuKPD4P8D8SeKJw80leF1Ul8FoHr";async function u(){try{const f=await fetch(p,{headers:{"x-api-key":_}});if(!f.ok)throw new Error(`Failed to fetch: ${f.statusText}`);A(l,await f.json())}catch(f){A(s,f.message)}}se(()=>(u(),window.addEventListener("keydown",v),window.addEventListener("wheel",h,{passive:!1}),()=>{window.removeEventListener("keydown",v),window.removeEventListener("wheel",h)}));function a(f){A(t,f),setTimeout(()=>{o(i).scrollSelectedIntoView()},10)}function g(){A(t,null)}function c(){if(o(t)===null){o(l).length>0&&(A(t,o(l)[0].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10));return}const f=o(l).findIndex(I=>I.id===o(t));f<o(l).length-1&&(A(t,o(l)[f+1].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10))}function d(){if(o(t)===null){o(l).length>0&&(A(t,o(l)[o(l).length-1].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10));return}const f=o(l).findIndex(I=>I.id===o(t));f>0&&(A(t,o(l)[f-1].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10))}function v(f){switch(f.key){case"Escape":g();break;case"ArrowDown":case"ArrowRight":c();break;case"ArrowUp":case"ArrowLeft":d();break}}let m=0;const b=50;function h(f){f.preventDefault(),m+=Math.abs(f.deltaY),!(m<b)&&(m=0,!r&&(r=!0,setTimeout(()=>{r=!1},500),f.deltaY>0?c():d()))}W();var w=$e(),x=Y(R(w),2);{var T=f=>{var I=Ze(),E=R(I);L(I),oe(()=>K(E,`Error: ${o(s)??""}`)),H(f,I)},y=(f,I)=>{{var E=S=>{var z=je();H(S,z)},M=S=>{ce(Qe(S,{get careerEvents(){return o(l)},get selectedEventId(){return o(t)},onSelect:a,onClose:g,$$legacy:!0}),z=>A(i,z),()=>o(i))};B(f,S=>{o(l).length===0?S(E):S(M,!1)},I)}};B(x,f=>{o(s)?f(T):f(y,!1)})}L(w),H(n,w),G()}export{it as component};
