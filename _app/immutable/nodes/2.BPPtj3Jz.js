import{t as O,f as F,c as H}from"../chunks/CwldcDWk.js";import{i as X}from"../chunks/DcTzFIy4.js";import{c as J,w as N,g as de,o as ve,h as he,N as pe,D as o,Y as D,P as _e,Q as Z,s as q,d as U,f as ge,R as le,p as ie,T as me,m as se,ad as we,a6 as k,am as j,an as B,x as $,ao as Ee,ap as Ie,aq as be,l as Te,ar as ye,as as Se,at as xe,au as Ae,a as Ne,av as Ce,aw as Le,ax as Me,ay as Re,V as Ve,ab as ke,t as G,ai as oe,K as M,L,M as P,a0 as x,J as ce,y as Q}from"../chunks/BatoUL1g.js";import{s as Y}from"../chunks/BIlWtTmT.js";import{p as A,i as W}from"../chunks/DqDBf7zy.js";import{b as fe}from"../chunks/C9O30MNJ.js";function ze(n,e){return e}function De(n,e,t,r){for(var i=[],l=e.length,s=0;s<l;s++)be(e[s].e,i,!0);var h=l>0&&i.length===0&&t!==null;if(h){var g=t.parentNode;Te(g),g.append(t),r.clear(),R(n,e[0].prev,e[l-1].next)}ye(i,()=>{for(var u=0;u<l;u++){var a=e[u];h||(r.delete(a.k),R(n,a.prev,a.next)),Se(a.e,!h)}})}function He(n,e,t,r,i,l=null){var s=n,h={flags:e,items:new Map,first:null};{var g=n;s=N?J(de(g)):g.appendChild(ve())}N&&he();var u=null,a=!1,m=D(()=>{var c=t();return we(c)?c:c==null?[]:se(c)});pe(()=>{var c=o(m),d=c.length;if(a&&d===0)return;a=d===0;let v=!1;if(N){var w=s.data===_e;w!==(d===0)&&(s=Z(),J(s),q(!1),v=!0)}if(N){for(var I=null,p,E=0;E<d;E++){if(U.nodeType===8&&U.data===ge){s=U,v=!0,q(!1);break}var b=c[E],T=r(b,E);p=ue(U,h,I,null,b,T,E,i,e,t),h.items.set(T,p),I=p}d>0&&J(Z())}N||Oe(c,h,s,i,e,r,t),l!==null&&(d===0?u?le(u):u=ie(()=>l(s)):u!==null&&me(u,()=>{u=null})),v&&q(!0),o(m)}),N&&(s=U)}function Oe(n,e,t,r,i,l,s){var h=n.length,g=e.items,u=e.first,a=u,m,c=null,d=[],v=[],w,I,p,E;for(E=0;E<h;E+=1){if(w=n[E],I=l(w,E),p=g.get(I),p===void 0){var b=a?a.e.nodes_start:t;c=ue(b,e,c,c===null?e.first:c.next,w,I,E,r,i,s),g.set(I,c),d=[],v=[],a=c.next;continue}if(Ue(p,w,E),(p.e.f&B)!==0&&le(p.e),p!==a){if(m!==void 0&&m.has(p)){if(d.length<v.length){var T=v[0],y;c=T.prev;var z=d[0],f=d[d.length-1];for(y=0;y<d.length;y+=1)ee(d[y],T,t);for(y=0;y<v.length;y+=1)m.delete(v[y]);R(e,z.prev,f.next),R(e,c,z),R(e,f,T),a=T,c=f,E-=1,d=[],v=[]}else m.delete(p),ee(p,a,t),R(e,p.prev,p.next),R(e,p,c===null?e.first:c.next),R(e,c,p),c=p;continue}for(d=[],v=[];a!==null&&a.k!==I;)(a.e.f&B)===0&&(m??(m=new Set)).add(a),v.push(a),a=a.next;if(a===null)continue;p=a}d.push(p),c=p,a=p.next}if(a!==null||m!==void 0){for(var _=m===void 0?[]:se(m);a!==null;)(a.e.f&B)===0&&_.push(a),a=a.next;var S=_.length;if(S>0){var V=h===0?t:null;De(e,_,V,g)}}$.first=e.first&&e.first.e,$.last=c&&c.e}function Ue(n,e,t,r){Ie(n.v,e),n.i=t}function ue(n,e,t,r,i,l,s,h,g,u){var a=(g&xe)!==0,m=(g&Ae)===0,c=a?m?k(i):j(i):i,d=(g&Ee)===0?s:j(s),v={i:d,v:c,k:l,a:null,e:null,prev:t,next:r};try{return v.e=ie(()=>h(n,c,d,u),N),v.e.prev=t&&t.e,v.e.next=r&&r.e,t===null?e.first=v:(t.next=v,t.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function ee(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,i=e?e.e.nodes_start:t,l=n.e.nodes_start;l!==r;){var s=Ne(l);i.before(l),l=s}}function R(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const te=[...` 	
\r\f \v\uFEFF`];function Pe(n,e,t){var r=n==null?"":""+n;if(t){for(var i in t)if(t[i])r=r?r+" "+i:i;else if(r.length)for(var l=i.length,s=0;(s=r.indexOf(i,s))>=0;){var h=s+l;(s===0||te.includes(r[s-1]))&&(h===r.length||te.includes(r[h]))?r=(s===0?"":r.substring(0,s))+r.substring(h+1):s=h}}return r===""?null:r}function ne(n,e,t,r,i,l){var s=n.__className;if(N||s!==t||s===void 0){var h=Pe(t,r,l);(!N||h!==n.getAttribute("class"))&&(h==null?n.removeAttribute("class"):n.className=h),n.__className=t}else if(l&&i!==l)for(var g in l){var u=!!l[g];(i==null||u!==!!i[g])&&n.classList.toggle(g,u)}return l}const Ye=Symbol("is custom element"),Ke=Symbol("is html");function re(n,e,t,r){var i=Fe(n);N&&(i[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="loading"&&(n[Ce]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Je(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Fe(n){return n.__attributes??(n.__attributes={[Ye]:n.nodeName.includes("-"),[Ke]:n.namespaceURI===Le})}var ae=new Map;function Je(n){var e=ae.get(n.nodeName);if(e)return e;ae.set(n.nodeName,e=[]);for(var t,r=n,i=Element.prototype;i!==r;){t=Re(r);for(var l in t)t[l].set&&e.push(l);r=Me(r)}return e}function qe(n,e,t){var r=Ve(n,e);r&&r.set&&(n[e]=t,ke(()=>{n[e]=null}))}function Be(n){return function(...e){var t=e[0];return t.stopPropagation(),n==null?void 0:n.apply(this,e)}}var We=O('<button class="close-button svelte-8bdz63"><span class="close-icon svelte-8bdz63">×</span></button>'),Xe=O('<div role="button"><div class="timeline-content svelte-8bdz63"><div class="timeline-date svelte-8bdz63"> </div> <h2 class="svelte-8bdz63"> </h2> <h3 class="svelte-8bdz63"> </h3> <p> </p> <!></div></div>');function Ge(n,e){G(e,!1);let t=A(e,"event",8),r=A(e,"isSelected",8),i=A(e,"position",8),l=A(e,"selectedEventId",8),s=A(e,"onSelect",8),h=A(e,"onClose",8),g=A(e,"elementRef",8),u=k();oe(()=>(o(u)&&g().set(t().id,o(u)),()=>{g().delete(t().id)})),X();var a=Xe();let m;var c=M(a),d=M(c),v=M(d,!0);L(d);var w=P(d,2),I=M(w,!0);L(w);var p=P(w,2),E=M(p,!0);L(p);var b=P(p,2);let T;var y=M(b,!0);L(b);var z=P(b,2);{var f=_=>{var S=We();F("click",S,Be(function(...V){var C;(C=h())==null||C.apply(this,V)})),H(_,S)};W(z,_=>{r()&&_(f)})}L(c),L(a),fe(a,_=>x(u,_),()=>o(u)),ce((_,S,V)=>{m=ne(a,1,"timeline-item svelte-8bdz63",null,m,_),re(a,"tabindex",S),re(a,"aria-label",`View details for ${t().title??""} at ${t().company??""}`),Y(v,t().period),Y(I,t().title),Y(E,t().company),T=ne(b,1,"event-description svelte-8bdz63",null,T,V),Y(y,t().description)},[()=>({selected:r()}),()=>l()===null||Math.abs(i())<=1?0:-1,()=>({selected:r()})],D),F("click",a,()=>s()(t().id)),F("keydown",a,_=>_.key==="Enter"&&s()(t().id)),H(n,a),Q()}var Qe=O('<div class="timeline-container svelte-1epnw6j"></div>');function Ze(n,e){G(e,!1);let t=A(e,"careerEvents",8),r=A(e,"selectedEventId",8,null),i=A(e,"onSelect",8),l=A(e,"onClose",8),s=k(new Map);function h(){if(r()===null)return;const u=o(s).get(r());u&&u.scrollIntoView({behavior:"smooth",block:"center"})}X();var g=Qe();return He(g,5,t,ze,(u,a)=>{const m=D(()=>r()!==null&&o(a).id===r()),c=D(()=>r()!==null?t().findIndex(w=>w.id===r()):-1),d=D(()=>t().findIndex(w=>w.id===o(a).id)),v=D(()=>r()!==null?o(d)-o(c):0);Ge(u,{get event(){return o(a)},get isSelected(){return o(m)},get position(){return o(v)},get selectedEventId(){return r()},get onSelect(){return i()},get onClose(){return l()},get elementRef(){return o(s)},set elementRef(w){x(s,w)},$$legacy:!0})}),L(g),H(n,g),qe(e,"scrollSelectedIntoView",h),Q({scrollSelectedIntoView:h})}var je=O('<p class="error svelte-odrozm"> </p>'),$e=O("<p>Loading...</p>"),et=O('<main class="svelte-odrozm"><header class="svelte-odrozm"><h1 class="svelte-odrozm">My Career Timeline</h1> <p>A chronological journey through my professional experience</p></header> <!></main>');function st(n,e){G(e,!1);let t=k(null),r=!1,i=k(),l=k([]),s=k(null);const h="https://u7itj46pi1.execute-api.eu-west-1.amazonaws.com/prod/career-events",g="OCYtpnA5aa1XJuKPD4P8D8SeKJw80leF1Ul8FoHr",u=!1;async function a(){try{const _=await fetch(u?"/api-proxy":h,{headers:{"x-api-key":g}});if(!_.ok)throw new Error(`Failed to fetch: ${_.statusText}`);const S=await _.json();x(l,S.careerEvents)}catch(f){x(s,f instanceof Error?f.message:"An unknown error occurred")}}oe(()=>(a(),window.addEventListener("keydown",w),window.addEventListener("wheel",E,{passive:!1}),()=>{window.removeEventListener("keydown",w),window.removeEventListener("wheel",E)}));function m(f){x(t,f),setTimeout(()=>{o(i).scrollSelectedIntoView()},10)}function c(){x(t,null)}function d(){if(o(t)===null){o(l).length>0&&(x(t,o(l)[0].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10));return}const f=o(l).findIndex(_=>_.id===o(t));f<o(l).length-1&&(x(t,o(l)[f+1].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10))}function v(){if(o(t)===null){o(l).length>0&&(x(t,o(l)[o(l).length-1].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10));return}const f=o(l).findIndex(_=>_.id===o(t));f>0&&(x(t,o(l)[f-1].id),setTimeout(()=>{o(i).scrollSelectedIntoView()},10))}function w(f){switch(f.key){case"Escape":c();break;case"ArrowDown":case"ArrowRight":d();break;case"ArrowUp":case"ArrowLeft":v();break}}let I=0;const p=50;function E(f){f.preventDefault(),I+=Math.abs(f.deltaY),!(I<p)&&(I=0,!r&&(r=!0,setTimeout(()=>{r=!1},500),f.deltaY>0?d():v()))}X();var b=et(),T=P(M(b),2);{var y=f=>{var _=je(),S=M(_);L(_),ce(()=>Y(S,`Error: ${o(s)??""}`)),H(f,_)},z=(f,_)=>{{var S=C=>{var K=$e();H(C,K)},V=C=>{fe(Ze(C,{get careerEvents(){return o(l)},get selectedEventId(){return o(t)},onSelect:m,onClose:c,$$legacy:!0}),K=>x(i,K),()=>o(i))};W(f,C=>{o(l).length===0?C(S):C(V,!1)},_)}};W(T,f=>{o(s)?f(y):f(z,!1)})}L(b),H(n,b),Q()}export{st as component};
